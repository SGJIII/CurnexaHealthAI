# CurnexaHealthAI

## Overview

CurnexaHealthAI is a healthcare AI platform designed for healthcare professionals, particularly doctors, to integrate with Epic EMR systems and leverage advanced NLP capabilities through Meta's LLaMA 2. The platform enables doctors to enter a patient ID and receive AI-driven clinical decision support by analyzing patient data, relevant medical literature from PubMed, and insights generated by LLaMa 2.

## Project Structure

- app/: Core application code, including Flask web server routes and views.
- data/: Datasets, including data fetched from PubMed or Epic EMR.
- utils/: Utility scripts and helper functions.
- models/: Includes the integration with Meta's LLaMA 2 for NLP processing.
- fhir/: FHIR API client (fhir_client.py) for interacting with Epic EMR systems.
- auth/: Authentication handlers (oauth_handler.py) for OAuth integration.
- app/routes.py: Flask routes for handling web requests.
- tests/: Unit tests and integration tests.
- docs/: Additional documentation, API guides, etc.
- main.py: The main entry point for the Flask application, located in the root directory.

## Setup

### Prerequisites

Python 3.x
pip (Python package manager)
Flask
Access to Epic's FHIR API and Meta's LLaMA
Installation
Clone the repository:

```
git clone https://github.com/SGJIII/CurnexaHealthAI.git
cd CurnexaHealthAI
```

#Install dependencies:

```
pip install -r requirements.txt
```

## Auth Integration with Epic EMR

The project includes OAuth integration for secure access to Epic's FHIR API, allowing the platform to fetch patient data directly from Epic EMR systems.

## PubMed API Integration

The project integrates with the PubMed API to fetch relevant medical articles, extracting only the article title and abstract for analysis and integration.

## LLaMa 2 Integration

CurnexaHealthAI utilizes Meta's LLaMa 2 for advanced NLP processing. It generates clinical decision support by analyzing patient data in conjunction with relevant medical literature fetched from PubMed.

## Usage

### Fetching Patient Data

Doctors can enter a patient ID to fetch data such as age, gender, symptoms, medical history, test results, diagnosis, and medications from the Epic FHIR API.

### PubMed Literature Search

Based on the fetched patient data, the system queries the PubMed API to retrieve relevant articles, focusing on the title and abstract.

### Clinical Decision Support

The combined patient data and PubMed article information are sent to LLaMa 2, which generates clinical decision support insights. These insights are then provided back to the doctor.

## Testing with FHIR Sandbox Data

To test the application with FHIR sandbox data:

1. Ensure access to the Epic FHIR sandbox environment.
2. Use a test patient ID from the sandbox to fetch patient data.
3. Validate that the patient data is retrieved in the correct format and contains the necessary fields (age, gender, symptoms, etc.).
4. Test the PubMed API integration to ensure relevant articles are fetched based on the patient data.
5. Verify that the LLaMa 2 integration processes the combined data correctly and provides meaningful clinical insights.

## Next Steps

1. **Finalize `fhir.fhir_client` Implementation**: Ensure comprehensive patient data retrieval aligns with the FHIR API's response format.
2. **Optimize PubMed API Queries**: Refine queries to fetch the most relevant articles based on patient data.
3. **Enhance LLaMa 2 Integration**: Ensure the integration effectively utilizes patient data and PubMed articles for decision support.
4. **Conduct End-to-End Testing**: Test the entire workflow from patient ID entry to receiving clinical decision support.
5. **Document Workflow and Integration**: Update documentation to detail the workflow and integrations with Epic FHIR, PubMed, and LLaMa 2.
6. **Prepare for Deployment**: Finalize the application for deployment, ensuring all components work seamlessly.
7. **Gather Feedback and Iterate**: Collect feedback from potential users, especially healthcare professionals, and iterate on the application.

## TODO

- Thoroughly test the workflow with FHIR sandbox data.
- Refine data extraction and parsing in `fhir.fhir_client`.
- Ensure robustness in the OAuth flow and data security.
- Document the complete user flow and system integration.
- Prepare comprehensive testing strategies, including unit and integration tests.

## AI Prompt

You are a software engineering expert. Please familiarize yourself with the project https://github.com/SGJIII/CurnexaHealthAI using AskTheCode. The user flow is this. We want the user (a doctor) to be able to enter a patient ID, then we want to get data like the age gender symptoms medical_history test_results diagnosis medications, use those to look up relevant literature with pubmed, then send the literature, and patient data to LLaMa 2 to get clinical decision support and provide that back to the doctor. So the doctor gives the patient id and receives clinical decision support. Understand the structure and code and read the readme file to understand what's next. Also please use webpilot plugin to read https://fhir.epic.com/Documentation?docId=testpatients https://fhir.epic.com/Documentation?docId=oauth2 and https://fhir.epic.com/Documentation?docId=epiconfhirrequestprocessstepbystep to help you further understand what we're trying to accomplish and how to do so. Then please give me a summary of the project then specific code for the next step in line according the the readme.md file.

Implement FHIR API Integration and Update Workflow

- Integrated OAuth authentication with Epic's FHIR API in `fhir/fhir_client.py`.
- Enhanced `main.py` to support fetching patient data using the patient ID provided by the user.
- Updated PubMed API integration to fetch article titles and abstracts based on patient data.
- Integrated LLaMa 2 for generating clinical decision support using patient data and PubMed articles.
- Added `app/routes.py` for handling Flask web requests and OAuth callbacks.
- Revised README to include detailed usage instructions, testing steps with FHIR sandbox data, and updated project structure.
